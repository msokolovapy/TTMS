#create_match_manually.py



def display_players():
    sorted_serialized_players_list = restored_gameday_obj.sort_gameday_players()
    drop_down_list = create_drop_down_list(sorted_serialized_players_list)
    





@app.route('/admin/create_match_manually',methods = ['GET','POST'])
def create_match_manually():
    

    if clicked_button == 'manually_edit_players':
        

        return render_template('admin_create_match_manually.html', \
                            drop_down_list = drop_down_list)

    elif clicked_button == 'submit_updated_players':
        player_1_original_login_name = request.form.get('player_1_original_login_name')
        player_2_original_login_name = request.form.get('player_2_original_login_name')
        player_1_updated_login_name = request.form.get('player_1_updated_login_name')
        player_2_updated_login_name = request.form.get('player_2_updated_login_name')

        match_to_update = Match(player_1_original_login_name,player_2_original_login_name)
        restored_gameday_obj.update_match(match_to_update,player_1_updated_login_name, player_2_updated_login_name, 'active')
        serialize_gameday_obj(restored_gameday_obj)

        return redirect(url_for('admin'))

def user_made_player_selection_via(clicked_button):
    if clicked_button == 'submit_updated_players':
        return True

def user_decides_to_select_players_via(clicked_button):
    if clicked_button == 'manually_edit_players':
        return True

def obtain_info_from_session():
    players = deserialize_gameday_obj()
    clicked_button = request.form.get('edit_button')
    return players,clicked_button


@app.route('/admin/create_match_manually',methods = ['GET','POST'])
def create_match_manually():
    players,clicked_button = obtain_info_from_session()
    if user_decides_to_select_players_via(clicked_button):
        return build_web_page('choose_your_player_from',players.displayed_as_drop_down())
    if user_made_player_selection_via(clicked_button):
        old_match = restore_match_info_using(old_players_names)
        old_match.is_updated_with(new_player_names)
        old_match.status_updated_to('active')
        update_session_for(players)
        return redirect_to_web_page('admin')






